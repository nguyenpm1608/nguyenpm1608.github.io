<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Tr√≤ ch∆°i gh√©p ch·ªØ</title>
  <style>
    body {
      margin: 0;
      height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, #1a1a2e, #16213e);
      font-family: "Segoe UI", sans-serif;
      color: white;
      user-select: none;
    }
    h1 {
      margin-bottom: 10px;
      font-size: 2rem;
      letter-spacing: 2px;
      text-shadow: 0 0 10px rgba(255,255,255,0.3);
    }
    h2 {
      margin-bottom: 20px;
      font-size: 1.2rem;
      color: #ffccd5;
      text-shadow: 0 0 10px rgba(255,150,200,0.4);
    }
    .board {
      display: grid;
      grid-template-columns: repeat(9, 50px);
      grid-template-rows: repeat(9, 50px);
      gap: 4px;
      background: rgba(255,255,255,0.08);
      padding: 12px;
      border-radius: 16px;
      backdrop-filter: blur(12px);
      box-shadow: 0 8px 24px rgba(0,0,0,0.4);
    }
    .cell {
      width: 50px;
      height: 50px;
      background: rgba(255,255,255,0.12);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 0.8rem;
      color: white;
      transition: background 0.2s;
    }
    .cell.highlight {
      background: rgba(255,255,255,0.4);
    }
    .cell.filled {
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.5) inset;
    }
    .pieces {
      margin-top: 25px;
      display: flex;
      gap: 20px;
    }
    .piece {
      display: inline-grid;
      gap: 4px;
      padding: 8px;
      border-radius: 12px;
      background: rgba(255,255,255,0.1);
      backdrop-filter: blur(10px);
      cursor: grab;
    }
    .piece-cell {
      width: 40px;
      height: 40px;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      color: white;
    }
  </style>
</head>
<body>
  <h1>Tr√≤ gh√©p ch·ªØ üß©</h1>
  <h2>Anh y√™u Thanh Tr√∫c nhi·ªÅu! üíñ</h2>
  <div class="board" id="board"></div>
  <div class="pieces" id="pieces"></div>

  <script>
    const boardSize = 9;
    const board = Array.from({ length: boardSize }, () => Array(boardSize).fill(0));
    const boardEl = document.getElementById("board");
    const piecesEl = document.getElementById("pieces");

    const gradients = [
      ["#ff4d6d", "#ff8aa0"],
      ["#42a5f5", "#478ed1"],
      ["#66bb6a", "#43a047"],
      ["#fbc02d", "#f57f17"],
      ["#ab47bc", "#7b1fa2"],
      ["#ef5350", "#c62828"]
    ];
    function randomGradient() {
      const [c1, c2] = gradients[Math.floor(Math.random() * gradients.length)];
      return `linear-gradient(135deg, ${c1}, ${c2})`;
    }

    // t·∫°o b·∫£ng
    for (let r = 0; r < boardSize; r++) {
      for (let c = 0; c < boardSize; c++) {
        const cell = document.createElement("div");
        cell.className = "cell";
        cell.dataset.row = r;
        cell.dataset.col = c;
        boardEl.appendChild(cell);
      }
    }

    // c√°c h√¨nh m·∫£nh
    const pieceShapes = [
      [[1,1,1]],       // ngang 3
      [[1],[1],[1]],   // d·ªçc 3
      [[1,1],[1,1]],   // vu√¥ng
      [[1,1,1],[0,1,0]] // ch·ªØ T
    ];
    const names = ["Tr√∫c", "Nguy√™n"];

    let draggedPiece = null;
    let draggedShape = null;
    let draggedColor = null;
    let draggedName = null;

    function renderPieces() {
      piecesEl.innerHTML = "";
      pieceShapes.forEach(shape => {
        const piece = document.createElement("div");
        piece.className = "piece";
        piece.draggable = true;

        const rows = shape.length;
        const cols = shape[0].length;
        piece.style.gridTemplateColumns = `repeat(${cols}, 40px)`;

        const gradient = randomGradient();
        const name = names[Math.floor(Math.random() * names.length)];

        shape.forEach(row => row.forEach(val => {
          const pc = document.createElement("div");
          pc.className = "piece-cell";
          if (val) {
            pc.style.background = gradient;
            pc.textContent = name;
          }
          piece.appendChild(pc);
        }));

        piece.addEventListener("dragstart", e => {
          draggedPiece = piece;
          draggedShape = shape;
          draggedColor = gradient;
          draggedName = name;
          setTimeout(() => piece.style.opacity = "0.5", 0);
        });
        piece.addEventListener("dragend", e => {
          if (draggedPiece) draggedPiece.style.opacity = "1";
          draggedPiece = null;
          draggedShape = null;
          draggedName = null;
        });

        piecesEl.appendChild(piece);
      });
    }

    function canPlace(shape, row, col) {
      for (let r = 0; r < shape.length; r++) {
        for (let c = 0; c < shape[0].length; c++) {
          if (shape[r][c]) {
            const br = row + r, bc = col + c;
            if (br >= boardSize || bc >= boardSize) return false;
            if (board[br][bc] === 1) return false;
          }
        }
      }
      return true;
    }

    function placeShape(shape, row, col, color, name) {
      for (let r = 0; r < shape.length; r++) {
        for (let c = 0; c < shape[0].length; c++) {
          if (shape[r][c]) {
            const br = row + r, bc = col + c;
            board[br][bc] = 1;
            const cell = document.querySelector(`.cell[data-row="${br}"][data-col="${bc}"]`);
            cell.classList.add("filled");
            cell.style.background = color;
            cell.textContent = name;
          }
        }
      }
    }

    document.querySelectorAll(".cell").forEach(cell => {
      cell.addEventListener("dragover", e => {
        if (!draggedShape) return;
        e.preventDefault();
        const row = +cell.dataset.row, col = +cell.dataset.col;
        document.querySelectorAll(".cell").forEach(c => c.classList.remove("highlight"));
        if (canPlace(draggedShape, row, col)) {
          for (let r = 0; r < draggedShape.length; r++) {
            for (let c = 0; c < draggedShape[0].length; c++) {
              if (draggedShape[r][c]) {
                const br = row + r, bc = col + c;
                const target = document.querySelector(`.cell[data-row="${br}"][data-col="${bc}"]`);
                if (target) target.classList.add("highlight");
              }
            }
          }
        }
      });
      cell.addEventListener("dragleave", e => {
        document.querySelectorAll(".cell").forEach(c => c.classList.remove("highlight"));
      });
      cell.addEventListener("drop", e => {
        if (!draggedShape) return;
        const row = +cell.dataset.row, col = +cell.dataset.col;
        if (canPlace(draggedShape, row, col)) {
          placeShape(draggedShape, row, col, draggedColor, draggedName);
          draggedPiece.remove();
        }
        document.querySelectorAll(".cell").forEach(c => c.classList.remove("highlight"));
      });
    });

    renderPieces();
  </script>
</body>
</html>
