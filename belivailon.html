<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Gh√©p ch·ªØ Tr√∫c & Nguy√™n</title>
  <style>
    body {
      margin: 0;
      height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: linear-gradient(270deg, #0f0c29, #302b63, #24243e);
      background-size: 600% 600%;
      animation: gradientBG 20s ease infinite;
      font-family: "Poppins", sans-serif;
      color: white;
      user-select: none;
      overflow: hidden;
    }
    @keyframes gradientBG {
      0%{background-position:0% 50%}
      50%{background-position:100% 50%}
      100%{background-position:0% 50%}
    }

    h1 {
      margin-bottom: 10px;
      font-size: 2.5rem;
      letter-spacing: 2px;
      color: #ff99cc;
      text-shadow: 0 0 10px #ff66b2, 0 0 20px #ff4da6;
      animation: pulse 2s infinite;
    }
    @keyframes pulse {
      0%,100% { transform: scale(1);}
      50% { transform: scale(1.05);}
    }
    h2 {
      margin-bottom: 20px;
      font-size: 1.2rem;
      color: #ffe0ec;
      text-shadow: 0 0 8px rgba(255,200,220,0.6);
    }

    .board {
      display: grid;
      grid-template-columns: repeat(9, 52px);
      grid-template-rows: repeat(9, 52px);
      gap: 4px;
      padding: 14px;
      border-radius: 20px;
      background: rgba(255,255,255,0.08);
      backdrop-filter: blur(20px);
      box-shadow: 0 8px 25px rgba(0,0,0,0.5);
    }
    .cell {
      width: 52px;
      height: 52px;
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 0.75rem;
      color: white;
      transition: all 0.2s;
    }
    .cell.highlight {
      background: rgba(255,255,255,0.3);
      box-shadow: 0 0 12px #00e6e6;
      transform: scale(1.05);
    }
    .cell.filled {
      box-shadow: inset 0 0 12px rgba(0,0,0,0.6);
      animation: pop 0.3s ease;
    }
    @keyframes pop {
      0% { transform: scale(0.8);}
      100% { transform: scale(1);}
    }

    .pieces {
      margin-top: 28px;
      display: flex;
      gap: 24px;
    }
    .piece {
      display: inline-grid;
      gap: 4px;
      padding: 10px;
      border-radius: 14px;
      background: rgba(255,255,255,0.08);
      backdrop-filter: blur(15px);
      cursor: grab;
      box-shadow: 0 6px 18px rgba(0,0,0,0.4);
      transition: transform 0.2s;
    }
    .piece:active {
      cursor: grabbing;
      transform: scale(1.05);
    }
    .piece-cell {
      width: 42px;
      height: 42px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      color: white;
      font-size: 0.7rem;
      box-shadow: 0 0 6px rgba(0,0,0,0.4);
    }
  </style>
</head>
<body>
  <h1>Gh√©p ch·ªØ Tr√∫c & Nguy√™n</h1>
  <h2>Anh y√™u Thanh Tr√∫c nhi·ªÅu! üíñ</h2>
  <div class="board" id="board"></div>
  <div class="pieces" id="pieces"></div>

  <script>
    const boardSize = 9;
    const board = Array.from({ length: boardSize }, () => Array(boardSize).fill(0));
    const boardEl = document.getElementById("board");
    const piecesEl = document.getElementById("pieces");

    const gradients = [
      ["#ff4d6d", "#ff8aa0"],
      ["#42a5f5", "#478ed1"],
      ["#66bb6a", "#43a047"],
      ["#fbc02d", "#f57f17"],
      ["#ab47bc", "#7b1fa2"],
      ["#ef5350", "#c62828"],
      ["#29b6f6", "#0288d1"],
      ["#ffa726", "#ef6c00"]
    ];
    function randomGradient() {
      const [c1, c2] = gradients[Math.floor(Math.random() * gradients.length)];
      return `linear-gradient(135deg, ${c1}, ${c2})`;
    }

    for (let r = 0; r < boardSize; r++) {
      for (let c = 0; c < boardSize; c++) {
        const cell = document.createElement("div");
        cell.className = "cell";
        cell.dataset.row = r;
        cell.dataset.col = c;
        boardEl.appendChild(cell);
      }
    }

    const pieceShapes = [
      [[1,1,1]],      
      [[1],[1],[1]],  
      [[1,1],[1,1]],  
      [[1,1,1],[0,1,0]]
    ];
    const names = ["Tr√∫c", "Nguy√™n"];

    let draggedPiece = null;
    let draggedShape = null;
    let draggedColor = null;
    let draggedName = null;

    function renderPieces() {
      piecesEl.innerHTML = "";
      pieceShapes.forEach(shape => {
        const piece = document.createElement("div");
        piece.className = "piece";
        piece.draggable = true;

        const rows = shape.length;
        const cols = shape[0].length;
        piece.style.gridTemplateColumns = `repeat(${cols}, 42px)`;

        const gradient = randomGradient();
        const name = names[Math.floor(Math.random() * names.length)];

        shape.forEach(row => row.forEach(val => {
          const pc = document.createElement("div");
          pc.className = "piece-cell";
          if (val) {
            pc.style.background = gradient;
            pc.textContent = name;
          }
          piece.appendChild(pc);
        }));

        piece.addEventListener("dragstart", e => {
          draggedPiece = piece;
          draggedShape = shape;
          draggedColor = gradient;
          draggedName = name;
          setTimeout(() => piece.style.opacity = "0.5", 0);
        });
        piece.addEventListener("dragend", e => {
          if (draggedPiece) draggedPiece.style.opacity = "1";
          draggedPiece = null;
          draggedShape = null;
          draggedName = null;
        });

        piecesEl.appendChild(piece);
      });
    }

    function canPlace(shape, row, col) {
      for (let r = 0; r < shape.length; r++) {
        for (let c = 0; c < shape[0].length; c++) {
          if (shape[r][c]) {
            const br = row + r, bc = col + c;
            if (br >= boardSize || bc >= boardSize) return false;
            if (board[br][bc] === 1) return false;
          }
        }
      }
      return true;
    }

    function placeShape(shape, row, col, color, name) {
      for (let r = 0; r < shape.length; r++) {
        for (let c = 0; c < shape[0].length; c++) {
          if (shape[r][c]) {
            const br = row + r, bc = col + c;
            board[br][bc] = 1;
            const cell = document.querySelector(`.cell[data-row="${br}"][data-col="${bc}"]`);
            cell.classList.add("filled");
            cell.style.background = color;
            cell.textContent = name;
          }
        }
      }
    }

    document.querySelectorAll(".cell").forEach(cell => {
      cell.addEventListener("dragover", e => {
        if (!draggedShape) return;
        e.preventDefault();
        const row = +cell.dataset.row, col = +cell.dataset.col;
        document.querySelectorAll(".cell").forEach(c => c.classList.remove("highlight"));
        if (canPlace(draggedShape, row, col)) {
          for (let r = 0; r < draggedShape.length; r++) {
            for (let c = 0; c < draggedShape[0].length; c++) {
              if (draggedShape[r][c]) {
                const br = row + r, bc = col + c;
                const target = document.querySelector(`.cell[data-row="${br}"][data-col="${bc}"]`);
                if (target) target.classList.add("highlight");
              }
            }
          }
        }
      });
      cell.addEventListener("dragleave", e => {
        document.querySelectorAll(".cell").forEach(c => c.classList.remove("highlight"));
      });
      cell.addEventListener("drop", e => {
        if (!draggedShape) return;
        const row = +cell.dataset.row, col = +cell.dataset.col;
        if (canPlace(draggedShape, row, col)) {
          placeShape(draggedShape, row, col, draggedColor, draggedName);
          draggedPiece.remove();
        }
        document.querySelectorAll(".cell").forEach(c => c.classList.remove("highlight"));
      });
    });

    renderPieces();
  </script>
</body>
</html>
